<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
  <title>ALETHEIA — Unmask Your Essence</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Noto+Sans+KR:wght@200;300;400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>

  <!-- ===== 캔버스 배경 ===== -->
  <canvas id="bg-canvas"></canvas>

  <!-- ===== 진입 화면 ===== -->
  <div id="entry-screen" class="screen active">
    <div class="entry-container">
      <div class="entry-glow"></div>
      <h1 class="entry-logo">ALETHEIA</h1>
      <p class="entry-greek">ἀλήθεια</p>
      <div class="entry-line"></div>
      <p class="entry-tagline">가림막을 벗기면, 진리가 나타난다</p>
      <p class="entry-sub">대화를 통해 당신의 본질을 발견합니다</p>

      <div class="entry-form">
        <div class="input-glow-wrap">
          <input type="text" id="nickname-input" placeholder="당신을 뭐라고 부를까요?" autocomplete="off" maxlength="20">
        </div>
        <button id="start-btn" onclick="app.start()">
          <span>시작하기</span>
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
        </button>
      </div>
      <p class="entry-note">이름, 별명, 아무거나 괜찮아요</p>
    </div>
  </div>

  <!-- ===== 대화 화면 ===== -->
  <div id="chat-screen" class="screen">

    <header class="chat-header">
      <div class="header-left">
        <div class="header-logo-mark">A</div>
        <div class="header-info">
          <span class="header-title">ALETHEIA</span>
          <span class="header-user" id="display-name"></span>
        </div>
      </div>
      <div class="header-right">
        <div class="depth-indicator" id="depth-indicator">
          <div class="depth-rings">
            <div class="depth-ring r1"></div>
            <div class="depth-ring r2"></div>
            <div class="depth-ring r3"></div>
          </div>
          <span class="depth-count" id="depth-count">0</span>
        </div>
        <button class="essence-btn" id="essence-btn" onclick="app.requestEssence()" disabled>
          <span class="essence-btn-glow"></span>
          <span>Essence</span>
        </button>
      </div>
    </header>

    <main class="chat-area" id="chat-area">
      <div class="chat-messages" id="chat-messages"></div>
    </main>

    <footer class="chat-footer">
      <div class="input-container">
        <textarea id="user-input" placeholder="당신의 이야기를 들려주세요..." rows="1" maxlength="2000" onkeydown="app.handleKeyDown(event)" oninput="app.autoResize(this)"></textarea>
        <button class="send-btn" id="send-btn" onclick="app.send()">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M22 2L11 13M22 2l-7 20-4-9M22 2L2 9l9 4"/></svg>
        </button>
      </div>
    </footer>

    <!-- Essence 오버레이 -->
    <div class="essence-overlay" id="essence-overlay" onclick="app.closeEssence(event)">
      <div class="essence-panel">
        <div class="essence-header">
          <div>
            <h2>Essence Snapshot</h2>
            <p class="essence-subtitle">현재 버전의 당신</p>
          </div>
          <button class="essence-close" onclick="app.closeEssence()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M18 6L6 18M6 6l12 12"/></svg>
          </button>
        </div>
        <div class="essence-body" id="essence-content">
          <div class="essence-loading">
            <div class="essence-loading-ring"></div>
            <p>당신의 이야기를 분석하고 있습니다</p>
          </div>
        </div>
      </div>
    </div>

  </div>

  <script src="/js/app.js"></script>
</body>
</html>
