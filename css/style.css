:root{--bg:#fff;--text:#111;--sub:#555;--line:#e0e0e0;--nav-bg:rgba(255,255,255,0.1);--font-main:"Helvetica Neue","Arial",sans-serif;--font-mono:"Courier New",Courier,monospace;--cursor-color:#000;--cursor-border:rgba(0,0,0,0.1);--cursor-ring-bg:rgba(255,255,255,0.05)}
body.dark-mode{--bg:#0a0a0a;--text:#e8e8e8;--sub:#999;--line:#222;--nav-bg:rgba(20,20,20,0.6);--cursor-color:#fff;--cursor-border:rgba(255,255,255,0.15);--cursor-ring-bg:rgba(255,255,255,0.03)}
*{margin:0;padding:0;box-sizing:border-box;cursor:none!important}
body{background:var(--bg);color:var(--text);font-family:var(--font-main);line-height:1.5;overflow-x:hidden;transition:background 0.6s ease,color 0.4s ease}
body::after{content:"";position:fixed;top:0;left:0;width:100%;height:100%;background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.05'/%3E%3C/svg%3E");pointer-events:none;z-index:9000;opacity:0.05}
.cursor-dot{width:4px;height:4px;background:var(--cursor-color);border-radius:50%;position:fixed;pointer-events:none;z-index:999999;transition:transform 0.1s,background 0.4s}
.cursor-ring{width:34px;height:34px;border:1px solid var(--cursor-border);border-radius:50%;position:fixed;pointer-events:none;z-index:999999;transition:transform 0.2s ease-out,border-color 0.4s,background 0.4s;transform:translate(-50%,-50%);backdrop-filter:blur(3px);background:var(--cursor-ring-bg)}
body.hovered .cursor-ring{transform:translate(-50%,-50%) scale(1.2);background:rgba(255,255,255,0.1);border-color:rgba(0,0,0,0.2);backdrop-filter:blur(0)}
body.dark-mode.hovered .cursor-ring{background:rgba(255,255,255,0.05);border-color:rgba(255,255,255,0.3)}
body.clicking .cursor-ring{transform:translate(-50%,-50%) scale(0.7);transition:transform 0.08s}
body.clicking .cursor-dot{transform:scale(1.4);transition:transform 0.08s}
.container{max-width:1520px;margin:0 auto;padding:0 40px}
nav{position:fixed;top:20px;left:50%;transform:translateX(-50%);width:98%;max-width:1580px;height:75px;display:flex;justify-content:space-between;align-items:center;padding:0 40px;z-index:7000;background:var(--nav-bg);border:1px solid rgba(255,255,255,0.15);border-radius:6px;backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px);box-shadow:0 10px 30px rgba(0,0,0,0.02)}
.logo{font-size:19px;font-weight:300;letter-spacing:-0.01em;cursor:pointer;display:flex;align-items:center;gap:10px;color:#000}
.logo svg{width:26px;height:26px;fill:none;stroke:#000;stroke-width:1.5}
.nav-center{display:flex;gap:32px;list-style:none;position:absolute;left:50%;transform:translateX(-50%);font-size:12px;font-weight:400;letter-spacing:0.05em}
.nav-center li{color:#999;transition:0.2s;cursor:pointer;position:relative;padding:6px 0}
.nav-center li:hover{color:#000}
.nav-center li:active{transform:scale(0.94);transition:0.06s}
.nav-center li.active{color:#000;font-weight:600}
.nav-center li.active::after{content:'';position:absolute;bottom:-2px;left:0;right:0;height:1.5px;background:#000}
.nav-auth{display:flex;align-items:center;gap:12px}
.btn-signin{display:flex;align-items:center;gap:7px;padding:0 16px;height:34px;border:1px solid rgba(0,0,0,0.1);border-radius:8px;background:transparent;font-size:12px;font-weight:400;color:#333;cursor:pointer;transition:0.2s;font-family:inherit;box-sizing:border-box}
.btn-signin:hover{border-color:rgba(0,0,0,0.25);background:rgba(0,0,0,0.02)}
.btn-signin svg{width:14px;height:14px}
.nav-profile{display:none;align-items:center;cursor:pointer;position:relative}
.nav-profile.show{display:flex}
.nav-profile-btn{display:flex;align-items:center;gap:7px;padding:0 16px;height:34px;border:1px solid rgba(0,0,0,0.1);border-radius:8px;background:transparent;font-size:12px;font-weight:400;color:#333;cursor:pointer;transition:0.2s;font-family:inherit;box-sizing:border-box}
.nav-profile-btn:hover{border-color:rgba(0,0,0,0.25);background:rgba(0,0,0,0.02)}
.nav-profile-btn svg{width:14px;height:14px;stroke:currentColor;fill:none;stroke-width:1.5}
.nav-name{font-size:13px;font-weight:400}
.profile-dropdown{display:none;position:absolute;top:50px;right:0;background:#fff;border:1px solid rgba(0,0,0,0.08);border-radius:10px;padding:6px;min-width:160px;box-shadow:0 8px 30px rgba(0,0,0,0.12);z-index:9999}
.profile-dropdown.show{display:block}
.pd-item{display:block;width:100%;padding:9px 14px;font-size:12px;color:#333;border:none;background:none;text-align:left;cursor:pointer;border-radius:6px;transition:0.15s;font-family:inherit}
.pd-item:hover{background:rgba(0,0,0,0.04)}
.page{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;visibility:hidden;transition:opacity 1.2s ease;overflow:hidden;background:transparent}
.page.active{opacity:1;visibility:visible;z-index:2}
#page-about{overflow-y:auto;background:transparent}
#canvas-container{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0;pointer-events:none}

/* ABOUT */
#page-about .container{background:transparent}
#page-about section{padding:180px 0;border-bottom:1px solid rgba(0,0,0,0.04);position:relative}
.reveal{opacity:0;filter:blur(15px);transform:translateY(30px);transition:all 1.8s cubic-bezier(0.19,1,0.22,1)}
.reveal.active{opacity:1;filter:blur(0);transform:translateY(0)}
.reveal-d1{transition-delay:0.3s}
.reveal-d2{transition-delay:0.6s}
.reveal-d3{transition-delay:0.9s}
.typing-target{opacity:0}.typing-active{opacity:1}
.hero-top{height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;overflow:hidden;z-index:1;gap:20px}
.hero-landing{display:contents}
.hl-logo{font-size:clamp(18px,2.2vw,26px);font-weight:500;letter-spacing:0.04em;color:#000;opacity:0;transform:translateY(-10px);filter:blur(6px);transition:opacity 4s cubic-bezier(0.19,1,0.22,1),transform 4s cubic-bezier(0.19,1,0.22,1),filter 4s cubic-bezier(0.19,1,0.22,1);line-height:1.4;text-align:center;text-shadow:0 0 30px rgba(255,255,255,0.9)}
.hl-logo.visible{opacity:1;transform:translateY(0);filter:blur(0)}
.hl-bottom{display:flex;flex-direction:column;align-items:center}
.hl-typing{font-size:clamp(28px,3.5vw,52px);font-weight:400;color:#222;letter-spacing:0.01em;min-height:1.4em;text-align:center;line-height:1.3;text-shadow:0 0 40px rgba(255,255,255,0.9)}
.hl-typing .cursor{display:inline-block;width:2px;height:1em;background:#000;margin-left:2px;animation:blink 0.6s infinite;vertical-align:text-bottom}
@keyframes blink{0%,100%{opacity:1}50%{opacity:0}}
.hl-buttons{display:flex;gap:12px;margin-top:24px;opacity:0;transform:translateY(10px);filter:blur(6px);transition:opacity 4s cubic-bezier(0.19,1,0.22,1),transform 4s cubic-bezier(0.19,1,0.22,1),filter 4s cubic-bezier(0.19,1,0.22,1)}
.hl-buttons.visible{opacity:1;transform:translateY(0);filter:blur(0)}
.hl-btn{padding:12px 28px;border:1px solid rgba(0,0,0,0.1);border-radius:30px;background:rgba(255,255,255,0.2);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);font-size:11px;font-weight:600;letter-spacing:0.12em;color:#111;cursor:pointer;transition:all 0.3s;font-family:inherit}
.hl-btn:hover{background:rgba(0,0,0,0.06);border-color:rgba(0,0,0,0.25);transform:translateY(-2px)}
.hl-btn:active{transform:translateY(0) scale(0.96);transition:all 0.08s}
.label{font-size:42px;font-weight:500;letter-spacing:-0.02em;color:#000;margin-bottom:80px;display:block;font-family:var(--font-main);min-height:1.2em;text-shadow:0 0 30px rgba(255,255,255,0.8)}
.phi-text{font-size:28px;font-weight:300;line-height:1.5;max-width:900px;margin-bottom:40px;color:#222;text-shadow:0 0 20px rgba(255,255,255,0.6)}
.phi-desc{font-size:16px;color:var(--sub);line-height:1.7;max-width:750px;font-weight:300;text-shadow:0 0 20px rgba(255,255,255,0.6)}
.method-list{display:flex;flex-direction:column;width:100%}
.method-row{display:flex;justify-content:space-between;align-items:flex-start;padding:80px 0;border-bottom:1px solid rgba(0,0,0,0.04);position:relative;transition:0.3s}
.method-row:last-child{border-bottom:none}
.method-left{width:30%;display:flex;flex-direction:column;padding-top:10px}
.m-num{font-size:12px;font-weight:600;color:#999;margin-bottom:20px;letter-spacing:0.05em}
.m-desc{font-size:15px;line-height:1.6;color:#444;margin-bottom:30px;font-weight:300;word-break:keep-all}
.m-btn{padding:10px 24px;font-size:12px;font-weight:600;border:1px solid #ccc;background:transparent;color:#000;border-radius:50px;width:fit-content;cursor:pointer;transition:all 0.3s ease;font-family:inherit}
.m-btn:hover{border-color:#000;background:#000;color:#fff;transform:translateY(-2px)}
.m-btn:active{transform:translateY(0) scale(0.95);transition:all 0.08s}
.method-right{width:65%;text-align:right;user-select:none}
.big-typo{display:flex;justify-content:flex-end;gap:5px;font-size:clamp(50px,8vw,120px);font-weight:300;line-height:0.9;color:#000;letter-spacing:-0.02em;cursor:default;text-shadow:0 0 40px rgba(255,255,255,0.9);filter:blur(6px);opacity:0.4;transition:filter 0.6s,opacity 0.6s}
.method-row:hover .big-typo{filter:blur(0);opacity:1}
.char{display:inline-block;transition:transform 0.4s cubic-bezier(0.175,0.885,0.32,1.275);will-change:transform}
footer{padding:60px 0;font-size:12px;color:var(--sub);display:flex;justify-content:space-between;border-top:1px solid var(--line);margin-top:100px}

/* SERVICE PAGES */

/* ===== DEMO SECTIONS ===== */
.demo-section{padding:140px 0!important}
.demo-layout{display:flex;gap:60px;align-items:center;max-width:1200px;margin:0 auto;padding:0 40px}
.demo-layout-reverse{flex-direction:row-reverse}
.demo-text{flex:1;min-width:0}
.demo-visual{flex:1;min-width:0}
.demo-num{font-size:11px;font-weight:600;color:#999;letter-spacing:0.12em;display:block;margin-bottom:20px}
body.dark-mode .demo-num{color:#555}
.demo-title{font-size:clamp(24px,3vw,36px);font-weight:400;letter-spacing:-0.01em;line-height:1.4;margin-bottom:20px;color:#111}
body.dark-mode .demo-title{color:#e8e8e8}
.demo-desc{font-size:15px;line-height:1.8;color:#555;font-weight:300;word-break:keep-all;margin-bottom:12px}
body.dark-mode .demo-desc{color:#999}
.demo-sub{font-size:13px;color:#aaa;font-weight:300;line-height:1.6}

/* Demo Chat Mock */
.demo-chat-mock{background:rgba(0,0,0,0.03);border:1px solid rgba(0,0,0,0.06);border-radius:16px;overflow:hidden;max-width:420px}
body.dark-mode .demo-chat-mock{background:rgba(255,255,255,0.03);border-color:rgba(255,255,255,0.06)}
.dcm-header{padding:14px 18px;border-bottom:1px solid rgba(0,0,0,0.05);display:flex;align-items:center;gap:10px}
body.dark-mode .dcm-header{border-color:rgba(255,255,255,0.05)}
.dcm-dot{width:7px;height:7px;border-radius:50%;background:#4ade80}
.dcm-title{font-size:11px;letter-spacing:0.08em;color:#999;font-weight:500}
.dcm-messages{padding:18px;display:flex;flex-direction:column;gap:16px;min-height:280px}
.dcm-msg{opacity:0;transform:translateY(8px);transition:opacity 0.6s,transform 0.6s}
.dcm-msg.show{opacity:1;transform:translateY(0)}
.dcm-label{font-size:9px;letter-spacing:0.1em;color:#bbb;display:block;margin-bottom:4px}
.dcm-user .dcm-label{text-align:right}
.dcm-bubble{font-size:13px;line-height:1.7;color:#333;font-weight:300;padding:10px 14px;border-radius:10px}
body.dark-mode .dcm-bubble{color:#ddd}
.dcm-ai .dcm-bubble{background:transparent;padding-left:0;border-left:2px solid rgba(201,169,110,0.3);padding-left:12px}
.dcm-user .dcm-bubble{background:rgba(0,0,0,0.04);text-align:right;border-radius:10px 10px 4px 10px}
body.dark-mode .dcm-user .dcm-bubble{background:rgba(255,255,255,0.04)}

/* Demo Profile Mock */
.demo-profile-mock{background:rgba(0,0,0,0.03);border:1px solid rgba(0,0,0,0.06);border-radius:16px;overflow:hidden;max-width:420px}
body.dark-mode .demo-profile-mock{background:rgba(255,255,255,0.03);border-color:rgba(255,255,255,0.06)}
.dpm-header{padding:14px 18px;border-bottom:1px solid rgba(0,0,0,0.05);display:flex;justify-content:space-between;align-items:center}
body.dark-mode .dpm-header{border-color:rgba(255,255,255,0.05)}
.dpm-title{font-size:12px;font-weight:500;letter-spacing:0.06em;color:#c9a96e}
.dpm-ver{font-size:10px;color:#ccc}
.dpm-body{padding:18px}
.dpm-tag-area{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:18px}
.dpm-tag{padding:4px 10px;font-size:10px;border-radius:20px;border:1px solid rgba(0,0,0,0.08);color:#666;font-weight:400;opacity:0;transform:scale(0.8);transition:opacity 0.5s,transform 0.5s}
body.dark-mode .dpm-tag{border-color:rgba(255,255,255,0.1);color:#aaa}
.dpm-tag.show{opacity:1;transform:scale(1)}
.dpm-section{margin-bottom:14px}
.dpm-label{font-size:9px;letter-spacing:0.1em;text-transform:uppercase;color:#aaa;display:block;margin-bottom:6px;font-weight:500}
.dpm-value,.dpm-narrative{font-size:13px;color:#444;line-height:1.7;font-weight:300}
body.dark-mode .dpm-value,body.dark-mode .dpm-narrative{color:#bbb}
.dpm-energy{display:flex;flex-direction:column;gap:4px}
.dpm-energy-high{font-size:12px;color:#4ade80}
.dpm-energy-low{font-size:12px;color:#f87171}

/* Demo Essence Flow */
.demo-essence-flow{display:flex;align-items:center;justify-content:center;gap:16px;padding:40px 20px;flex-wrap:wrap}
.def-step{display:flex;flex-direction:column;align-items:center;gap:8px;padding:20px;background:rgba(0,0,0,0.03);border:1px solid rgba(0,0,0,0.06);border-radius:14px;min-width:80px;transition:transform 0.3s,box-shadow 0.3s}
body.dark-mode .def-step{background:rgba(255,255,255,0.03);border-color:rgba(255,255,255,0.06)}
.def-step:hover{transform:translateY(-4px);box-shadow:0 8px 20px rgba(0,0,0,0.05)}
.def-icon{font-size:24px}
.def-label{font-size:11px;font-weight:500;color:#666;letter-spacing:0.04em}
body.dark-mode .def-label{color:#aaa}
.def-arrow{font-size:18px;color:#ccc}
body.dark-mode .def-arrow{color:#444}

/* ===== MOBILE RESPONSIVE ===== */
.svc-page{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;position:relative}
.svc-intro{text-align:center;max-width:560px;padding:0 30px}
.svc-intro-num{font-size:11px;font-weight:600;color:#bbb;letter-spacing:0.15em;margin-bottom:16px}
.svc-intro-title{font-size:clamp(28px,3.5vw,48px);font-weight:400;letter-spacing:-0.02em;margin-bottom:16px;color:#111}
.svc-intro-desc{font-size:15px;color:#888;line-height:1.8;font-weight:400;word-break:keep-all}

/* Service page entrance animation */
.svc-anim{opacity:0;transform:translateY(20px);filter:blur(6px);transition:opacity 1.6s cubic-bezier(0.19,1,0.22,1),transform 1.6s cubic-bezier(0.19,1,0.22,1),filter 1.6s cubic-bezier(0.19,1,0.22,1)}
.svc-anim.visible{opacity:1;transform:translateY(0);filter:blur(0)}

/* ============================================
   CHATBOX (v4 pattern – bottom fixed, height expand)
   ============================================ */
.chatbox-wrap{position:fixed;left:0;right:0;bottom:0;width:100%;display:flex;justify-content:center;align-items:flex-end;gap:12px;padding:0 24px 12px;z-index:9999;pointer-events:none}
.chatbox-wrap>*{pointer-events:auto}
.chatbox{width:100%;max-width:700px;display:flex;flex-direction:column;height:56px;overflow:hidden;border-radius:20px;border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.08);backdrop-filter:blur(30px);-webkit-backdrop-filter:blur(30px);box-shadow:0 10px 40px rgba(0,0,0,0.03);transition:height 1.2s cubic-bezier(0.19,1,0.22,1),background 1s,box-shadow 1s,border-color 1s,backdrop-filter 1s,-webkit-backdrop-filter 1s;pointer-events:auto}
.chatbox.expanded{height:min(76vh,calc(100vh - 140px));background:rgba(255,255,255,0.12);box-shadow:0 20px 80px rgba(0,0,0,0.04);border-color:rgba(255,255,255,0.12);backdrop-filter:blur(40px);-webkit-backdrop-filter:blur(40px)}
/* UNMASK PANEL */
.unmask-panel{width:100%;max-width:560px;height:min(76vh,calc(100vh - 140px));border-radius:20px;border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.08);backdrop-filter:blur(40px);-webkit-backdrop-filter:blur(40px);box-shadow:0 20px 80px rgba(0,0,0,0.04);display:flex;flex-direction:column;overflow:hidden;flex-shrink:0}
.um-header{padding:16px 20px 12px;border-bottom:1px solid rgba(0,0,0,0.04);display:flex;align-items:center;justify-content:space-between;flex-shrink:0}
.um-header-title{font-size:11px;letter-spacing:0.1em;text-transform:uppercase;color:#999;font-weight:500}
.um-header-status{font-size:10px;color:#bbb;display:flex;align-items:center;gap:5px}
.um-status-dot{width:5px;height:5px;border-radius:50%;background:#ccc;transition:background 0.5s}
.um-status-dot.active{background:#4ade80;animation:statusPulse 2s ease-in-out infinite}
@keyframes statusPulse{0%,100%{opacity:1}50%{opacity:0.4}}
.um-body{flex:1;overflow-y:auto;padding:16px 20px;scrollbar-width:none;-ms-overflow-style:none}
.um-body::-webkit-scrollbar{display:none}
.um-empty{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;gap:12px;text-align:center}
.um-empty-icon{width:40px;height:40px;border-radius:50%;border:1px solid rgba(0,0,0,0.06);display:flex;align-items:center;justify-content:center}
.um-empty-icon svg{width:18px;height:18px;stroke:#ccc;fill:none;stroke-width:1.5}
.um-empty-text{font-size:12px;color:#bbb;line-height:1.6}
/* Data fragments */
.um-fragment{opacity:0;transform:translateY(8px);transition:opacity 0.6s,transform 0.6s;margin-bottom:16px}
.um-fragment.visible{opacity:1;transform:translateY(0)}
.um-frag-label{font-size:9px;letter-spacing:0.1em;text-transform:uppercase;color:#aaa;margin-bottom:6px;font-weight:500}
.um-frag-content{font-size:12px;color:#666;line-height:1.6}
.um-frag-tags{display:flex;flex-wrap:wrap;gap:4px;margin-top:4px}
.um-frag-tag{padding:3px 8px;border:1px solid rgba(0,0,0,0.06);border-radius:12px;font-size:10px;color:#888;background:rgba(0,0,0,0.02);animation:tagFadeIn 0.5s ease}
@keyframes tagFadeIn{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:scale(1)}}
.um-frag-bar{height:3px;border-radius:2px;background:rgba(0,0,0,0.04);margin-top:6px;overflow:hidden}
.um-frag-bar-fill{height:100%;border-radius:2px;background:rgba(0,0,0,0.15);transition:width 1s cubic-bezier(0.4,0,0.2,1);width:0}
.um-frag-node{display:flex;align-items:center;gap:8px;margin-bottom:8px}
.um-frag-dot{width:6px;height:6px;border-radius:50%;background:#000;opacity:0.15;flex-shrink:0}
.um-frag-line{font-size:11px;color:#777;line-height:1.5}
/* Dark mode */
body.dark-mode .um-header{border-bottom-color:rgba(255,255,255,0.04)}
body.dark-mode .unmask-panel{background:rgba(20,20,20,0.6);border-color:rgba(255,255,255,0.06)}body.dark-mode .um-empty-icon{border-color:rgba(255,255,255,0.08)}
body.dark-mode .um-empty-icon svg{stroke:#555}
body.dark-mode .um-empty-text{color:#555}
body.dark-mode .um-frag-content{color:#999}
body.dark-mode .um-frag-tag{border-color:rgba(255,255,255,0.06);color:#777;background:rgba(255,255,255,0.03)}
body.dark-mode .um-frag-bar{background:rgba(255,255,255,0.04)}
body.dark-mode .um-frag-bar-fill{background:rgba(255,255,255,0.2)}
body.dark-mode .um-frag-dot{background:#fff}
body.dark-mode .um-frag-line{color:#888}
.chatbox .cb-header,.chatbox .cb-msgs,.chatbox .cb-input{opacity:0;filter:blur(6px);transition:opacity 1s ease 0.3s,filter 1s ease 0.3s}
.chatbox.expanded .cb-header,.chatbox.expanded .cb-msgs,.chatbox.expanded .cb-input{opacity:1;filter:blur(0)}

/* Collapsed Bar */
.cb-bar{display:flex;align-items:center;gap:10px;padding:14px 18px;min-height:56px;height:56px;cursor:pointer;flex-shrink:0}
.cb-model{display:inline-flex;align-items:center;gap:5px;font-size:11px;font-weight:500;color:#999;padding:3px 10px;border-radius:6px;background:rgba(255,255,255,0.1);cursor:pointer;transition:0.2s;flex-shrink:0;-webkit-user-select:none;user-select:none}
.cb-model:active{transform:scale(0.93);transition:0.06s}
.cb-model:hover{background:rgba(0,0,0,0.07);color:#666}
.cb-model .dot{width:5px;height:5px;border-radius:50%}
.cb-model .arr{width:10px;height:10px;stroke:currentColor;fill:none;stroke-width:2}
.cb-ph{flex:1;font-size:14px;color:#bbb;font-weight:400;display:flex;align-items:center}
.cb-caret{display:inline-block;width:1.5px;height:15px;background:#999;margin-right:4px;animation:blink 1.2s ease-in-out infinite}
@keyframes blink{0%,100%{opacity:1}50%{opacity:0}}
.chatbox.expanded .cb-ph,.chatbox.expanded .cb-caret{display:none}
.chatbox.expanded .cb-bar{display:none}

/* Expanded Body */
.cb-body{display:flex;flex-direction:column;flex:1;overflow:hidden;min-height:0;position:relative}
.cb-header{display:flex;align-items:center;justify-content:space-between;padding:14px 18px 12px;border-bottom:1px solid rgba(255,255,255,0.08);flex-shrink:0}
.cb-header-left{display:flex;align-items:center;gap:8px}
.cb-header-right{display:flex;align-items:center;gap:5px}
.cb-header-logo{width:22px;height:22px;border-radius:6px;background:rgba(0,0,0,0.7);display:flex;align-items:center;justify-content:center}
.cb-header-logo svg{width:11px;height:11px;stroke:#fff;fill:none;stroke-width:1.5}
.cb-header-name{font-size:12px;font-weight:500;color:#444}
.cb-close{width:28px;height:28px;border-radius:7px;border:none;background:rgba(0,0,0,0.04);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:0.15s}
.cb-close:hover{background:rgba(0,0,0,0.08)}
.cb-close svg{width:12px;height:12px;stroke:#888;fill:none;stroke-width:2}

/* Messages */
.cb-msgs{flex:1;overflow-y:auto;padding:16px 18px;display:flex;flex-direction:column;gap:16px;scrollbar-width:none;-ms-overflow-style:none}
.cb-msgs::-webkit-scrollbar{display:none}
.cb-welcome{display:flex;flex-direction:column;align-items:center;text-align:center;padding:30px 10px;flex:1;justify-content:center}
.cb-welcome.hidden{display:none}
.cb-welcome-t{font-size:17px;font-weight:400;color:#222;margin-bottom:5px}
.cb-welcome-s{font-size:13px;color:#aaa;font-weight:400;line-height:1.5;max-width:260px}
.cb-chips{display:flex;flex-wrap:wrap;gap:6px;justify-content:center;margin-top:18px}
.cb-chip{padding:7px 14px;border-radius:16px;font-size:11px;color:#555;background:rgba(255,255,255,0.2);border:1px solid rgba(0,0,0,0.03);cursor:pointer;transition:0.25s;font-family:inherit;font-weight:400}
.cb-chip:hover{background:rgba(255,255,255,0.4);border-color:rgba(0,0,0,0.08);transform:translateY(-1px)}
.cb-chip:active{transform:translateY(0) scale(0.95);transition:0.06s}

/* Msg Bubbles */
.msg{display:flex;gap:10px;animation:msgIn 0.4s ease;position:relative}
.msg.msg-right{flex-direction:row-reverse}
.msg.msg-right .msg-body{text-align:right;display:flex;flex-direction:column;align-items:flex-end}
.msg.msg-right .msg-text{background:rgba(255,255,255,0.45);display:inline-block;padding:10px 14px;border-radius:14px 14px 4px 14px;text-align:left;width:fit-content;max-width:85%;border:1px solid rgba(0,0,0,0.04)}
.msg:not(.msg-right) .msg-body{display:flex;flex-direction:column;align-items:flex-start}
.msg:not(.msg-right) .msg-text{background:rgba(255,255,255,0.38);padding:10px 14px;border-radius:14px 14px 14px 4px;border:1px solid rgba(0,0,0,0.04);width:fit-content;max-width:85%}
@keyframes msgIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
.msg-ava{width:24px;height:24px;border-radius:7px;flex-shrink:0;display:flex;align-items:center;justify-content:center;margin-top:2px}
.msg-ava.ai{background:rgba(0,0,0,0.6)}.msg-ava.ai svg{width:11px;height:11px;stroke:#fff;fill:none;stroke-width:1.5}
.msg-ava.user{background:rgba(0,0,0,0.06)}.msg-ava.user svg{width:11px;height:11px;stroke:#555;fill:none;stroke-width:1.5}
.msg-body{flex:1;min-width:0}
.msg-role{font-size:10px;font-weight:600;color:#bbb;margin-bottom:4px;letter-spacing:0.05em}
.msg-text{font-size:14px;line-height:1.7;color:#222;font-weight:400;word-break:keep-all}

/* Msg actions (bookmark, image) */
.msg-actions{display:flex;gap:4px;margin-top:4px;opacity:0;transition:opacity 0.2s}
.msg:hover .msg-actions{opacity:1}
.msg-action-btn{width:22px;height:22px;border:none;background:rgba(0,0,0,0.04);border-radius:5px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:0.15s}
.msg-action-btn:hover{background:rgba(0,0,0,0.08)}
.msg-action-btn svg{width:11px;height:11px;stroke:#999;fill:none;stroke-width:1.5}
.msg-action-btn.bookmarked{background:rgba(0,0,0,0.08)}
.msg-action-btn.bookmarked svg{stroke:#000;fill:#000}

/* Msg image */
.msg-img{max-width:200px;border-radius:10px;margin-top:6px;cursor:pointer;transition:0.2s}
.msg-img:hover{transform:scale(1.02)}

.typing span{display:inline-block;width:5px;height:5px;border-radius:50%;background:#ccc;margin-right:4px;animation:tDot 1.4s ease infinite}
.typing span:nth-child(2){animation-delay:0.15s}.typing span:nth-child(3){animation-delay:0.3s}
@keyframes tDot{0%,80%,100%{opacity:0.3;transform:scale(0.8)}40%{opacity:1;transform:scale(1.2)}}

/* Input */
.cb-input{padding:10px 16px 12px;border-top:1px solid rgba(255,255,255,0.06);flex-shrink:0}
.cb-model-row{display:flex;align-items:center;padding:0 4px 10px}
.cb-input-row{display:flex;align-items:flex-end;gap:8px;background:rgba(255,255,255,0.08);border:1px solid rgba(255,255,255,0.1);border-radius:14px;padding:8px 10px;transition:0.25s}
.cb-input-row:focus-within{border-color:rgba(255,255,255,0.2);box-shadow:0 4px 20px rgba(0,0,0,0.02);background:rgba(255,255,255,0.15)}
/* Attach btn */
.cb-attach{width:28px;height:28px;border:none;background:rgba(0,0,0,0.04);border-radius:8px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:0.15s;flex-shrink:0}
.cb-attach:hover{background:rgba(0,0,0,0.08)}
.cb-attach:active{transform:scale(0.88);transition:0.06s}
.cb-attach svg{width:13px;height:13px;stroke:#888;fill:none;stroke-width:1.5}

/* Header icon buttons */
.cb-icon-btn{width:28px;height:28px;border-radius:7px;border:none;background:rgba(0,0,0,0.04);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:0.15s}
.cb-icon-btn:hover{background:rgba(0,0,0,0.08)}
.cb-icon-btn:active{transform:scale(0.88);transition:0.06s}
.cb-icon-btn svg{width:13px;height:13px;stroke:#888;fill:none;stroke-width:1.5}
.cb-icon-btn.active{background:#000}
.cb-icon-btn.active svg{stroke:#fff}
.cb-icon-btn.pulse{animation:btnPulse 0.6s ease}
@keyframes btnPulse{0%{transform:scale(1)}50%{transform:scale(1.2);background:rgba(0,0,0,0.15)}100%{transform:scale(1)}}
/* Unmask button enhancements */
#cbProfileBtn{position:relative}
.unmask-badge{position:absolute;top:-4px;right:-4px;min-width:16px;height:16px;border-radius:8px;background:#000;color:#fff;font-size:9px;font-weight:600;display:flex;align-items:center;justify-content:center;padding:0 4px;opacity:0;transform:scale(0);transition:all 0.4s cubic-bezier(0.34,1.56,0.64,1);pointer-events:none}
.unmask-badge.show{opacity:1;transform:scale(1)}
body.dark-mode .unmask-badge{background:#fff;color:#000}
.cb-icon-btn.unmask-glow{animation:unmaskGlow 1.5s ease}
@keyframes unmaskGlow{0%{transform:scale(1);box-shadow:none}15%{transform:scale(1.3);box-shadow:0 0 20px rgba(0,0,0,0.2)}30%{transform:scale(1.15)}50%{transform:scale(1.25);box-shadow:0 0 12px rgba(0,0,0,0.1)}100%{transform:scale(1);box-shadow:none}}
body.dark-mode .cb-icon-btn.unmask-glow{animation:unmaskGlowDk 1.5s ease}
@keyframes unmaskGlowDk{0%{transform:scale(1);box-shadow:none}15%{transform:scale(1.3);box-shadow:0 0 20px rgba(255,255,255,0.25)}30%{transform:scale(1.15)}50%{transform:scale(1.25);box-shadow:0 0 12px rgba(255,255,255,0.15)}100%{transform:scale(1);box-shadow:none}}
.cb-icon-btn.unmask-shake{animation:unmaskShake 0.5s ease}
@keyframes unmaskShake{0%,100%{transform:translateX(0)}15%{transform:translateX(-3px)}30%{transform:translateX(3px)}45%{transform:translateX(-2px)}60%{transform:translateX(2px)}75%{transform:translateX(-1px)}}

/* Overlay panels (history / profile) */
.cb-overlay-panel{display:none;position:absolute;top:54px;left:0;right:0;bottom:0;background:rgba(255,255,255,0.92);backdrop-filter:blur(60px);-webkit-backdrop-filter:blur(60px);z-index:10;overflow-y:auto;padding:20px;animation:panelIn 0.8s ease;scrollbar-width:none;-ms-overflow-style:none}
.cb-overlay-panel::-webkit-scrollbar{display:none}
.cb-overlay-panel.show{display:block}
@keyframes panelIn{from{opacity:0;filter:blur(6px);transform:translateY(6px)}to{opacity:1;filter:blur(0);transform:translateY(0)}}
.cbp-title{font-size:14px;font-weight:500;color:#333;letter-spacing:-0.01em;margin-bottom:16px}
.cbp-profile-sub{font-size:12px;color:#aaa;font-weight:400;margin-bottom:16px;line-height:1.5}

/* History items */
.cbh-item{padding:12px 14px;border-radius:10px;cursor:pointer;transition:background 0.15s;margin-bottom:4px;background:rgba(255,255,255,0.5)}
.cbh-item:hover{background:rgba(255,255,255,0.75)}
.cbh-item-date{font-size:10px;color:#bbb;margin-bottom:4px;letter-spacing:0.02em}
.cbh-item-preview{font-size:13px;color:#333;font-weight:400;line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
.cbh-empty{text-align:center;padding:40px 10px;font-size:13px;color:#999;font-weight:400;line-height:1.6}

/* Profile tags */
.cbp-tags{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:20px}

/* Gallery grid */
.cbp-gallery{display:grid;grid-template-columns:repeat(3,1fr);gap:6px}
.cbp-gallery-item{aspect-ratio:1;border-radius:8px;overflow:hidden;cursor:pointer;position:relative}
.cbp-gallery-item img{width:100%;height:100%;object-fit:cover;transition:transform 0.3s}
.cbp-gallery-item:hover img{transform:scale(1.05)}
.cbp-gallery-empty{grid-column:1/-1;text-align:center;padding:40px 10px;font-size:13px;color:#999;font-weight:400;line-height:1.6}

/* File attachment preview */
.cb-file-preview{display:flex;align-items:center;gap:8px;padding:8px 12px;margin:0 16px 6px;background:rgba(0,0,0,0.03);border-radius:10px;font-size:12px;color:#555}
.cb-file-preview-icon{width:28px;height:28px;border-radius:6px;background:rgba(0,0,0,0.06);display:flex;align-items:center;justify-content:center;flex-shrink:0}
.cb-file-preview-icon svg{width:13px;height:13px;stroke:#666;fill:none;stroke-width:1.5}
.cb-file-preview-name{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.cb-file-preview-remove{width:20px;height:20px;border:none;background:none;cursor:pointer;display:flex;align-items:center;justify-content:center;opacity:0.5}
.cb-file-preview-remove:hover{opacity:1}
.cb-file-preview-remove svg{width:10px;height:10px;stroke:#999;fill:none;stroke-width:2}
.cbp-tag{padding:5px 12px;border-radius:20px;font-size:11px;font-weight:500;background:rgba(0,0,0,0.04);color:#555;animation:tagIn 0.4s ease;border:1px solid rgba(0,0,0,0.06)}
.cbp-tag.new{background:rgba(0,0,0,0.08);color:#000;border-color:rgba(0,0,0,0.12)}
@keyframes tagIn{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:scale(1)}}
.cbp-section{margin-bottom:16px;padding:14px;background:rgba(255,255,255,0.5);border-radius:10px;border:1px solid rgba(0,0,0,0.04)}
.cbp-section.locked{opacity:0.3;pointer-events:none}
.cbp-section.unlocked{animation:sectionUnlock 0.8s ease}
@keyframes sectionUnlock{0%{opacity:0.3;transform:translateY(4px)}100%{opacity:1;transform:translateY(0)}}
.cbp-section-title{font-size:11px;font-weight:500;color:#999;letter-spacing:0;margin-bottom:8px}
.cbp-section-value{font-size:13px;color:#333;font-weight:400;line-height:1.6;word-break:keep-all}
/* Unmask depth & status */
.um-depth-wrap{margin-bottom:18px}
.um-depth-label{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}
.um-depth-title{font-size:10px;letter-spacing:0.08em;text-transform:uppercase;color:#aaa;font-weight:500}
.um-depth-count{font-size:10px;color:#bbb}
.um-depth-bar{height:3px;border-radius:2px;background:rgba(0,0,0,0.05);overflow:hidden}
.um-depth-fill{height:100%;border-radius:2px;background:#000;opacity:0.2;width:0;transition:width 1.5s cubic-bezier(0.4,0,0.2,1)}
.um-status{font-size:10px;color:#bbb;display:flex;align-items:center;gap:5px;margin-bottom:16px}
.um-status-dot{width:5px;height:5px;border-radius:50%;background:#ccc;transition:background 0.5s}
.um-status-dot.active{background:#4ade80;animation:umPulse 2s ease infinite}
@keyframes umPulse{0%,100%{opacity:1;box-shadow:0 0 0 0 rgba(74,222,128,0.4)}50%{opacity:0.6;box-shadow:0 0 6px 2px rgba(74,222,128,0.15)}}
body.dark-mode .um-depth-bar{background:rgba(255,255,255,0.05)}
body.dark-mode .um-depth-fill{background:#fff;opacity:0.25}
.cbp-prompt-wrap{margin-top:20px;padding:14px;background:rgba(0,0,0,0.02);border-radius:10px;border:1px solid rgba(0,0,0,0.04)}
.cbp-prompt{font-size:12px;color:#888;line-height:1.7;white-space:pre-wrap;word-break:break-all;max-height:120px;overflow-y:auto;scrollbar-width:none}
.cbp-prompt::-webkit-scrollbar{display:none}
.cb-ta{flex:1;border:none;outline:none;background:transparent;font-size:14px;font-family:inherit;color:#111;resize:none;line-height:1.5;max-height:100px;min-height:30px;font-weight:400;padding:4px 0}
.cb-ta::placeholder{color:#bbb}
.cb-send{width:30px;height:30px;border-radius:10px;background:#000;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0;opacity:0.12;transition:0.2s}
.cb-send.ready{opacity:1}
.cb-send:active{transform:scale(0.88);transition:0.06s}
.cb-send svg{width:14px;height:14px;stroke:#fff;fill:none;stroke-width:2}

/* UNMASK */
.btn-unmask-start{margin-top:28px;padding:12px 28px;border:1px solid #000;border-radius:8px;background:#000;color:#fff;font-size:13px;font-weight:500;cursor:pointer;transition:0.2s;font-family:inherit}
.btn-unmask-start:hover{background:#222}

/* INTERPRET */
.interpret-input-wrap{display:flex;gap:10px;max-width:420px;margin:28px auto 0}
.interpret-input{flex:1;padding:13px 18px;border:1px solid rgba(0,0,0,0.08);border-radius:10px;font-size:14px;font-family:inherit;outline:none;transition:0.2s;background:rgba(255,255,255,0.7);backdrop-filter:blur(10px)}
.interpret-input:focus{border-color:rgba(0,0,0,0.2);background:rgba(255,255,255,0.9)}
.interpret-go{padding:13px 24px;background:#000;color:#fff;border:none;border-radius:10px;font-size:13px;font-weight:500;cursor:pointer;transition:0.2s;font-family:inherit}
.interpret-go:hover{background:#222}
.interpret-result{width:100%;max-width:600px;margin:40px auto 0;padding:0 20px;animation:msgIn 0.6s ease}
.ir-header{display:flex;align-items:center;gap:10px;margin-bottom:24px}
.ir-field{font-size:20px;font-weight:500;color:#111}
.ir-badge{font-size:10px;font-weight:600;color:#999;letter-spacing:0.08em;padding:4px 10px;border:1px solid rgba(0,0,0,0.08);border-radius:20px}
.ir-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px}
.ir-card{padding:18px;background:rgba(255,255,255,0.5);backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);border:1px solid rgba(0,0,0,0.04);border-radius:12px}
.ir-card-title{font-size:11px;font-weight:600;color:#999;margin-bottom:10px;letter-spacing:0.02em}
.ir-card-body{font-size:14px;color:#222;font-weight:400;line-height:1.6}
.ir-insight{padding:20px;background:rgba(0,0,0,0.03);border-radius:12px;border:1px solid rgba(0,0,0,0.04)}
#page-interpret .svc-page{overflow-y:auto;padding-bottom:80px}

/* ARCHIVE */
#page-archive{padding-top:0;overflow-y:auto;overflow-x:hidden}
.archive-map{position:relative;width:100%;min-height:100vh;display:flex;align-items:center;justify-content:center}
.archive-map-header{position:absolute;top:100px;left:50%;transform:translateX(-50%);text-align:center;z-index:5;pointer-events:none}
.archive-map-title{font-size:clamp(28px,3vw,44px);font-weight:300;letter-spacing:-0.02em;margin-bottom:8px;color:var(--text)}
.archive-map-sub{font-size:13px;color:#999;font-weight:300}
.archive-map-canvas{position:relative;width:100%;max-width:1100px;height:75vh;margin:0 auto}
.map-lines{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:1}
.map-lines line{stroke:rgba(0,0,0,0.06);stroke-width:0.5;transition:stroke 0.4s}
body.dark-mode .map-lines line{stroke:rgba(255,255,255,0.06)}
.map-node{position:absolute;z-index:3;cursor:pointer;transform:translate(-50%,-50%)}
.map-dot{width:8px;height:8px;border-radius:50%;background:#000;transition:transform 0.3s,box-shadow 0.3s;position:relative}
.map-dot::after{content:'';position:absolute;top:-6px;left:-6px;width:20px;height:20px;border-radius:50%;border:1px solid rgba(0,0,0,0.08);transition:0.3s}
body.dark-mode .map-dot{background:#fff}
body.dark-mode .map-dot::after{border-color:rgba(255,255,255,0.1)}
.map-node:hover .map-dot{transform:scale(1.8);box-shadow:0 0 24px rgba(0,0,0,0.2)}
body.dark-mode .map-node:hover .map-dot{box-shadow:0 0 24px rgba(255,255,255,0.3)}
.map-node:active .map-dot{transform:scale(0.6)!important;transition:transform 0.08s}
.map-node:hover .map-dot::after{transform:scale(1.6);border-color:rgba(0,0,0,0.15)}
body.dark-mode .map-node:hover .map-dot::after{border-color:rgba(255,255,255,0.2)}
.map-label{position:absolute;top:20px;left:50%;transform:translateX(-50%);white-space:nowrap;text-align:center;pointer-events:none}
.map-label-cat{font-size:9px;letter-spacing:0.12em;text-transform:uppercase;color:#999;margin-bottom:2px;font-weight:500}
.map-label-name{font-size:13px;font-weight:500;letter-spacing:0.02em;color:var(--text)}
/* Breathing glow */
.map-dot-glow{position:absolute;top:50%;left:50%;width:30px;height:30px;border-radius:50%;transform:translate(-50%,-50%);background:radial-gradient(circle,rgba(0,0,0,0.06) 0%,transparent 70%);animation:dotBreathe 4s ease-in-out infinite;pointer-events:none}
body.dark-mode .map-dot-glow{background:radial-gradient(circle,rgba(255,255,255,0.08) 0%,transparent 70%)}
@keyframes dotBreathe{0%,100%{transform:translate(-50%,-50%) scale(1);opacity:0.6}50%{transform:translate(-50%,-50%) scale(2.2);opacity:0.15}}
.map-node[data-node="0"] .map-dot-glow{animation-delay:0s}
.map-node[data-node="1"] .map-dot-glow{animation-delay:-0.7s}
.map-node[data-node="2"] .map-dot-glow{animation-delay:-1.4s}
.map-node[data-node="3"] .map-dot-glow{animation-delay:-2.1s}
.map-node[data-node="4"] .map-dot-glow{animation-delay:-2.8s}
.map-node[data-node="5"] .map-dot-glow{animation-delay:-3.5s}
/* Twinkle sparks */
.map-spark{position:absolute;width:2px;height:2px;border-radius:50%;background:#000;opacity:0;pointer-events:none}
body.dark-mode .map-spark{background:#fff}
.map-spark.s1{top:-12px;left:4px;animation:sparkle 5s ease-in-out infinite 0s}
.map-spark.s2{top:6px;left:-10px;animation:sparkle 5s ease-in-out infinite 1.7s}
.map-spark.s3{top:10px;left:14px;animation:sparkle 5s ease-in-out infinite 3.3s}
@keyframes sparkle{0%,85%,100%{opacity:0;transform:scale(0)}90%{opacity:0.8;transform:scale(1.2)}95%{opacity:0;transform:scale(0)}}
/* Pulse animation on dots */
.map-dot::before{content:'';position:absolute;top:50%;left:50%;width:8px;height:8px;border-radius:50%;background:rgba(0,0,0,0.08);transform:translate(-50%,-50%);animation:mapPulse 3s ease-in-out infinite}
body.dark-mode .map-dot::before{background:rgba(255,255,255,0.08)}
@keyframes mapPulse{0%,100%{transform:translate(-50%,-50%) scale(1);opacity:0.6}50%{transform:translate(-50%,-50%) scale(3);opacity:0}}
.map-node[data-node="0"] .map-dot::before{animation-delay:0s}
.map-node[data-node="1"] .map-dot::before{animation-delay:0.5s}
.map-node[data-node="2"] .map-dot::before{animation-delay:1s}
.map-node[data-node="3"] .map-dot::before{animation-delay:1.5s}
.map-node[data-node="4"] .map-dot::before{animation-delay:2s}
.map-node[data-node="5"] .map-dot::before{animation-delay:2.5s}
/* Node floating */
.map-node{animation:nodeFloat 6s ease-in-out infinite}
.map-node[data-node="1"]{animation-delay:-1s}
.map-node[data-node="2"]{animation-delay:-2s}
.map-node[data-node="3"]{animation-delay:-3.5s}
.map-node[data-node="4"]{animation-delay:-4.2s}
.map-node[data-node="5"]{animation-delay:-5s}
@keyframes nodeFloat{0%,100%{margin-top:0}50%{margin-top:-6px}}
/* Orbital micro-particles around each node */
.map-orbit{position:absolute;top:50%;left:50%;width:40px;height:40px;transform:translate(-50%,-50%);pointer-events:none}
.map-orbit-dot{position:absolute;width:2px;height:2px;border-radius:50%;background:rgba(0,0,0,0.2);animation:orbitSpin 8s linear infinite}
body.dark-mode .map-orbit-dot{background:rgba(255,255,255,0.25)}
.map-orbit-dot:nth-child(1){animation-duration:6s;top:0;left:50%}
.map-orbit-dot:nth-child(2){animation-duration:8s;animation-delay:-2s;top:50%;left:100%}
.map-orbit-dot:nth-child(3){animation-duration:10s;animation-delay:-4s;top:100%;left:50%}
@keyframes orbitSpin{from{transform:rotate(0deg) translateX(18px) rotate(0deg)}to{transform:rotate(360deg) translateX(18px) rotate(-360deg)}}
/* Line dash animation */
.map-lines line{stroke-dasharray:4 8;animation:lineDash 20s linear infinite}
@keyframes lineDash{from{stroke-dashoffset:0}to{stroke-dashoffset:-120}}

body.pd-open .map-node,body.pd-open .map-orbit-dot,body.pd-open .map-dot::before,body.pd-open .map-dot-glow,body.pd-open .map-spark{animation-play-state:paused!important}
.project-detail{position:fixed;top:0;left:0;width:100%;height:100%;z-index:10000;opacity:0;visibility:hidden;transition:opacity 0.6s cubic-bezier(0.4,0,0.2,1),visibility 0s 0.6s;will-change:opacity}
.project-detail.show{opacity:1;visibility:visible;transition:opacity 0.6s cubic-bezier(0.4,0,0.2,1),visibility 0s 0s}
.project-detail-bg{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(255,255,255,0.75);backdrop-filter:blur(50px);-webkit-backdrop-filter:blur(50px)}
body.dark-mode .project-detail-bg{background:rgba(10,10,10,0.75)}
.project-detail-inner{position:relative;z-index:2;max-width:900px;margin:0 auto;height:100%;overflow-y:auto;padding:80px 60px;scrollbar-width:none;-ms-overflow-style:none}
.project-detail-inner::-webkit-scrollbar{display:none}
.project-detail-close{position:fixed;top:30px;right:40px;width:40px;height:40px;border:1px solid rgba(0,0,0,0.1);border-radius:50%;background:rgba(255,255,255,0.6);backdrop-filter:blur(20px);display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:3;transition:0.3s}
.project-detail-close:hover{background:rgba(0,0,0,0.05);border-color:rgba(0,0,0,0.2)}
.project-detail-close svg{width:16px;height:16px;stroke:#333;fill:none;stroke-width:1.5}
body.dark-mode .project-detail-close{border-color:rgba(255,255,255,0.1);background:rgba(30,30,30,0.6)}
body.dark-mode .project-detail-close:hover{background:rgba(255,255,255,0.08);border-color:rgba(255,255,255,0.2)}
body.dark-mode .project-detail-close svg{stroke:#ccc}
.pd-cat{font-size:10px;letter-spacing:0.14em;text-transform:uppercase;color:#999;margin-bottom:12px;font-weight:500}
.pd-name{font-size:clamp(36px,5vw,56px);font-weight:300;letter-spacing:-0.03em;margin-bottom:8px;color:var(--text);line-height:1.1}
.pd-sub{font-size:16px;color:#888;font-style:italic;margin-bottom:40px;font-weight:300}
.pd-gallery{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:40px}
.pd-gallery-item{aspect-ratio:4/3;border-radius:10px;overflow:hidden;position:relative}
.pd-gallery-item.wide{grid-column:span 2;aspect-ratio:21/9}
.pd-gallery-placeholder{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:11px;color:#aaa;letter-spacing:0.06em;text-transform:uppercase;border:1px solid rgba(0,0,0,0.04)}
body.dark-mode .pd-gallery-placeholder{border-color:rgba(255,255,255,0.06);color:#555}
/* Generative patterns for placeholders */
.pd-gallery-placeholder{background-size:10px 10px}
.pd-pat-dots{background-image:radial-gradient(rgba(0,0,0,0.06) 1px,transparent 1px);background-size:8px 8px}
.pd-pat-lines{background-image:repeating-linear-gradient(45deg,transparent,transparent 4px,rgba(0,0,0,0.03) 4px,rgba(0,0,0,0.03) 5px)}
.pd-pat-grid{background-image:linear-gradient(rgba(0,0,0,0.03) 1px,transparent 1px),linear-gradient(90deg,rgba(0,0,0,0.03) 1px,transparent 1px);background-size:16px 16px}
.pd-pat-cross{background-image:radial-gradient(rgba(0,0,0,0.04) 1.5px,transparent 1.5px),radial-gradient(rgba(0,0,0,0.04) 1.5px,transparent 1.5px);background-size:12px 12px;background-position:0 0,6px 6px}
body.dark-mode .pd-pat-dots{background-image:radial-gradient(rgba(255,255,255,0.06) 1px,transparent 1px)}
body.dark-mode .pd-pat-lines{background-image:repeating-linear-gradient(45deg,transparent,transparent 4px,rgba(255,255,255,0.04) 4px,rgba(255,255,255,0.04) 5px)}
body.dark-mode .pd-pat-grid{background-image:linear-gradient(rgba(255,255,255,0.04) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,0.04) 1px,transparent 1px)}
body.dark-mode .pd-pat-cross{background-image:radial-gradient(rgba(255,255,255,0.05) 1.5px,transparent 1.5px),radial-gradient(rgba(255,255,255,0.05) 1.5px,transparent 1.5px)}
.pd-section{margin-bottom:32px}
.pd-section-title{font-size:10px;letter-spacing:0.1em;text-transform:uppercase;color:#999;margin-bottom:10px;font-weight:500}
.pd-section-body{font-size:14px;line-height:1.8;color:#555;word-break:keep-all}
body.dark-mode .pd-section-body{color:#999}
.pd-tags{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:32px}
.pd-tag{padding:5px 12px;border:1px solid rgba(0,0,0,0.08);border-radius:20px;font-size:11px;color:#666;letter-spacing:0.02em}
body.dark-mode .pd-tag{border-color:rgba(255,255,255,0.08);color:#888}
.pd-meta{display:flex;gap:40px;padding-top:24px;border-top:1px solid rgba(0,0,0,0.04);margin-top:40px}
body.dark-mode .pd-meta{border-top-color:rgba(255,255,255,0.04)}
.pd-meta-item{display:flex;flex-direction:column;gap:4px}
.pd-meta-label{font-size:10px;letter-spacing:0.08em;text-transform:uppercase;color:#aaa;font-weight:500}
.pd-meta-value{font-size:13px;color:var(--text);font-weight:400}
/* archive detail styles moved to map-card */

/* MY PAGE */
#page-mypage{padding-top:115px;overflow-y:auto}
.mypage-inner{max-width:800px;margin:0 auto;padding:0 40px 80px}
.mypage-title{font-size:28px;font-weight:300;margin-bottom:40px}
.mypage-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.mypage-card{padding:28px 24px;border:1px solid rgba(0,0,0,0.05);border-radius:12px;background:rgba(255,255,255,0.6);backdrop-filter:blur(16px)}
.mc-label{font-size:10px;font-weight:600;color:#aaa;letter-spacing:0.08em;margin-bottom:14px}
.mc-value{font-size:22px;font-weight:300;margin-bottom:4px}
.mc-sub{font-size:12px;color:#999}
.sub-badge{display:inline-block;padding:3px 10px;border-radius:4px;font-size:10px;font-weight:700;letter-spacing:0.05em;background:rgba(0,0,0,0.05);color:#999}
.sub-badge.pro{background:#000;color:#fff}
.btn-upgrade{margin-top:16px;padding:10px 22px;font-size:12px;font-weight:500;border:1px solid #000;border-radius:8px;background:#000;color:#fff;cursor:pointer;transition:0.2s;font-family:inherit;display:block}
.btn-upgrade:hover{background:#222}

/* MODALS */
.modal-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0);backdrop-filter:blur(0px);-webkit-backdrop-filter:blur(0px);z-index:9000;display:none;align-items:center;justify-content:center;transition:background 0.4s,backdrop-filter 0.4s,-webkit-backdrop-filter 0.4s}
.modal-overlay.show{display:flex;animation:modalBgIn 1s ease forwards}
@keyframes modalBgIn{from{background:rgba(0,0,0,0);backdrop-filter:blur(0px);-webkit-backdrop-filter:blur(0px)}to{background:rgba(0,0,0,0.2);backdrop-filter:blur(14px);-webkit-backdrop-filter:blur(14px)}}
.login-modal,.pricing-modal{opacity:0;transform:translateY(16px) scale(0.98);filter:blur(8px);animation:modalContentIn 1.4s cubic-bezier(0.19,1,0.22,1) 0.2s forwards}
@keyframes modalContentIn{to{opacity:1;transform:translateY(0) scale(1);filter:blur(0)}}
.login-modal{background:rgba(255,255,255,0.92);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-radius:16px;padding:48px 40px 40px;max-width:400px;width:90%;text-align:center;box-shadow:0 30px 80px rgba(0,0,0,0.15)}
.login-logo svg{width:36px;height:36px;fill:none;stroke:#000;stroke-width:1.5;margin-bottom:24px}
.login-title{font-size:20px;font-weight:400;margin-bottom:8px}
.login-sub{font-size:13px;color:#999;margin-bottom:32px;font-weight:300}
.btn-google{width:100%;padding:14px;border:1px solid #ddd;border-radius:10px;background:#fff;font-size:14px;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:10px;transition:0.2s;font-family:inherit}
.btn-google:hover{background:#f8f8f8;border-color:#bbb}
.btn-google:active{transform:scale(0.97);transition:0.06s}
.btn-google svg{width:18px;height:18px}
.login-terms{font-size:11px;color:#bbb;margin-top:20px}.login-terms a{color:#888}
.pricing-modal{background:rgba(255,255,255,0.92);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);border-radius:16px;padding:48px 40px 40px;max-width:700px;width:90%;text-align:center;position:relative;box-shadow:0 30px 80px rgba(0,0,0,0.15);max-height:90vh;overflow-y:auto}
.pricing-title{font-size:24px;font-weight:400;margin-bottom:8px}
.pricing-sub{font-size:13px;color:#999;margin-bottom:32px;font-weight:300}
.pricing-grid{display:grid;grid-template-columns:1fr 1fr;gap:20px;text-align:left}
.price-card{padding:28px 24px;border:1px solid rgba(0,0,0,0.06);border-radius:12px;display:flex;flex-direction:column}
.price-card.featured{border-color:#000}
.pc-name{font-size:16px;font-weight:500;margin-bottom:8px}
.pc-price{font-size:28px;font-weight:300;margin-bottom:8px}.pc-price span{font-size:13px;color:#999}
.pc-desc{font-size:12px;color:#999;margin-bottom:20px}
.pc-features{list-style:none;margin-bottom:24px}
.pc-features li{font-size:13px;color:#444;padding:4px 0;font-weight:300}.pc-features li::before{content:"✓ ";color:#000;font-weight:600}
.btn-price{padding:12px;border-radius:8px;font-size:13px;font-weight:500;cursor:pointer;transition:0.2s;text-align:center;border:1px solid #000;font-family:inherit;margin-top:auto}
.btn-price.primary{background:#000;color:#fff}.btn-price.primary:hover{background:#222}.btn-price.primary:active{transform:scale(0.96);transition:0.06s}
.btn-price.secondary{background:transparent;color:#999;border-color:#ddd;cursor:default}
.modal-close{position:absolute;top:16px;right:16px;width:32px;height:32px;border:none;background:none;cursor:pointer;display:flex;align-items:center;justify-content:center}
.modal-close svg{width:16px;height:16px;stroke:#999;fill:none;stroke-width:2}

#modelMenu{position:fixed;z-index:99999;background:#fff;border:1px solid rgba(0,0,0,0.08);border-radius:10px;padding:4px;min-width:170px;box-shadow:0 8px 30px rgba(0,0,0,0.12);display:none;pointer-events:auto}
#modelMenu.show{display:block}
.mm-opt{display:flex;align-items:center;gap:8px;padding:9px 12px;border-radius:7px;font-size:12px;color:#333;cursor:pointer;transition:0.15s}
.mm-opt:hover{background:rgba(0,0,0,0.04)}
.mm-opt.active{font-weight:600;background:rgba(0,0,0,0.04)}
.mm-opt .md{width:6px;height:6px;border-radius:50%;flex-shrink:0}
.mm-opt.locked{opacity:0.45;cursor:default}.mm-opt.locked:hover{background:transparent}
.mm-lock{margin-left:auto;font-size:9px;font-weight:600;padding:2px 7px;border-radius:4px;background:rgba(0,0,0,0.06);color:#999}

/* ============ DARK MODE OVERRIDES ============ */
body.dark-mode nav{background:rgba(255,255,255,0.06);border-color:rgba(255,255,255,0.08);backdrop-filter:blur(30px);-webkit-backdrop-filter:blur(30px)}
body.dark-mode .logo{color:#fff}
body.dark-mode .logo svg{stroke:#fff}
body.dark-mode .nav-center li{color:#666}
body.dark-mode .nav-center li:hover{color:#eee}
body.dark-mode .nav-center li.active{color:#fff}
body.dark-mode .nav-center li.active::after{background:#fff}
body.dark-mode .btn-signin{color:#ccc;border-color:rgba(255,255,255,0.12)}
body.dark-mode .btn-signin:hover{border-color:rgba(255,255,255,0.25);background:rgba(255,255,255,0.04)}
body.dark-mode .nav-name{color:#ccc}
body.dark-mode .nav-profile-btn{color:#ccc;border-color:rgba(255,255,255,0.12)}
body.dark-mode .nav-profile-btn:hover{border-color:rgba(255,255,255,0.25);background:rgba(255,255,255,0.04)}
body.dark-mode .profile-dropdown{background:#1a1a1a;border-color:rgba(255,255,255,0.08);box-shadow:0 8px 30px rgba(0,0,0,0.4)}
body.dark-mode .pd-item{color:#ccc}
body.dark-mode .pd-item:hover{background:rgba(255,255,255,0.06)}
body.dark-mode .hl-logo{color:#fff;text-shadow:0 0 30px rgba(0,0,0,0.5)}
body.dark-mode .hl-typing{color:#ddd;text-shadow:0 0 40px rgba(0,0,0,0.5)}
body.dark-mode .hl-typing .cursor{background:#fff}
body.dark-mode .hl-btn{color:#ddd;border-color:rgba(255,255,255,0.15);background:rgba(255,255,255,0.04)}
body.dark-mode .hl-btn:hover{background:rgba(255,255,255,0.1);border-color:rgba(255,255,255,0.3)}
body.dark-mode .label{color:#fff;text-shadow:0 0 30px rgba(0,0,0,0.5)}
body.dark-mode .phi-text{color:#ddd}
body.dark-mode .phi-desc{color:#888}
body.dark-mode .m-num{color:#666}
body.dark-mode .m-desc{color:#999}
body.dark-mode .big-typo{color:#fff;text-shadow:0 0 40px rgba(0,0,0,0.5)}
body.dark-mode .m-btn{border-color:#555;color:#ddd}
body.dark-mode .m-btn:hover{border-color:#fff;background:#fff;color:#000}
body.dark-mode .method-row{border-bottom-color:rgba(255,255,255,0.04)}
body.dark-mode #page-about section{border-bottom-color:rgba(255,255,255,0.04)}
body.dark-mode footer{color:#666;border-top-color:rgba(255,255,255,0.06)}
body.dark-mode .svc-intro-title{color:#eee}
body.dark-mode .svc-intro-desc{color:#777}
body.dark-mode .svc-intro-num{color:#555}
body.dark-mode .chatbox{background:rgba(30,30,30,0.6);border-color:rgba(255,255,255,0.06)}
body.dark-mode .chatbox.expanded{background:rgba(20,20,20,0.75);border-color:rgba(255,255,255,0.08)}
body.dark-mode .cb-header{border-bottom-color:rgba(255,255,255,0.06)}
body.dark-mode .cb-header-name{color:#ccc}
body.dark-mode .cb-header-logo{background:rgba(255,255,255,0.12)}
body.dark-mode .cb-header-logo svg{stroke:#fff}
body.dark-mode .cb-icon-btn{background:rgba(255,255,255,0.06)}
body.dark-mode .cb-icon-btn:hover{background:rgba(255,255,255,0.12)}
body.dark-mode .cb-icon-btn svg{stroke:#999}
body.dark-mode .cb-icon-btn.active{background:#fff}
body.dark-mode .cb-icon-btn.active svg{stroke:#000}
body.dark-mode .cb-close{background:rgba(255,255,255,0.06)}
body.dark-mode .cb-close:hover{background:rgba(255,255,255,0.12)}
body.dark-mode .cb-close svg{stroke:#888}
body.dark-mode .msg-text{color:#ddd}
body.dark-mode .msg-role{color:#666}
body.dark-mode .msg.msg-right .msg-text{background:rgba(255,255,255,0.06);border-color:rgba(255,255,255,0.06)}
body.dark-mode .msg:not(.msg-right) .msg-text{background:rgba(255,255,255,0.04);border-color:rgba(255,255,255,0.06)}
body.dark-mode .msg-ava.ai{background:rgba(255,255,255,0.1)}
body.dark-mode .msg-ava.user{background:rgba(255,255,255,0.06)}
body.dark-mode .msg-ava.user svg{stroke:#999}
body.dark-mode .msg-action-btn{background:rgba(255,255,255,0.04)}
body.dark-mode .msg-action-btn:hover{background:rgba(255,255,255,0.08)}
body.dark-mode .msg-action-btn svg{stroke:#666}
body.dark-mode .cb-welcome-t{color:#eee}
body.dark-mode .cb-welcome-s{color:#666}
body.dark-mode .cb-chip{background:rgba(255,255,255,0.04);border-color:rgba(255,255,255,0.08);color:#aaa}
body.dark-mode .cb-chip:hover{background:rgba(255,255,255,0.08);border-color:rgba(255,255,255,0.15)}
body.dark-mode .cb-input{border-top-color:rgba(255,255,255,0.04)}
body.dark-mode .cb-input-row{background:rgba(255,255,255,0.05);border-color:rgba(255,255,255,0.06)}
body.dark-mode .cb-input-row:focus-within{border-color:rgba(255,255,255,0.15);background:rgba(255,255,255,0.08)}
body.dark-mode .cb-ta{color:#eee}
body.dark-mode .cb-ta::placeholder{color:#555}
body.dark-mode .cb-send{background:#fff}
body.dark-mode .cb-send svg{stroke:#000}
body.dark-mode .cb-attach{background:rgba(255,255,255,0.04)}
body.dark-mode .cb-attach:hover{background:rgba(255,255,255,0.08)}
body.dark-mode .cb-attach svg{stroke:#888}
body.dark-mode .cb-model{color:#888;background:rgba(255,255,255,0.06)}
body.dark-mode .cb-model:hover{background:rgba(255,255,255,0.1);color:#bbb}
body.dark-mode .cb-ph{color:#555}
body.dark-mode .cb-caret{background:#666}
body.dark-mode .cb-overlay-panel{background:rgba(10,10,10,0.94);backdrop-filter:blur(60px)}
body.dark-mode .cbp-title{color:#ddd}
body.dark-mode .cbp-profile-sub{color:#666}
body.dark-mode .cbh-item{background:rgba(255,255,255,0.04)}
body.dark-mode .cbh-item:hover{background:rgba(255,255,255,0.08)}
body.dark-mode .cbh-item-preview{color:#ccc}
body.dark-mode .cbh-item-date{color:#555}
body.dark-mode .cbh-empty{color:#555}
body.dark-mode .cbp-tag{background:rgba(255,255,255,0.06);color:#aaa;border-color:rgba(255,255,255,0.08)}
body.dark-mode .cbp-tag.new{background:rgba(255,255,255,0.12);color:#fff;border-color:rgba(255,255,255,0.15)}
body.dark-mode .cbp-section{background:rgba(255,255,255,0.03);border-color:rgba(255,255,255,0.06)}
body.dark-mode .cbp-section-title{color:#666}
body.dark-mode .cbp-section-value{color:#ccc}
body.dark-mode .cbp-prompt-wrap{background:rgba(255,255,255,0.02);border-color:rgba(255,255,255,0.04)}
body.dark-mode .cbp-prompt{color:#666}
body.dark-mode .cbp-gallery-empty{color:#555}
body.dark-mode .cb-file-preview{background:rgba(255,255,255,0.04);color:#aaa}
body.dark-mode .cb-file-preview-icon{background:rgba(255,255,255,0.06)}
body.dark-mode .cb-file-preview-icon svg{stroke:#888}
body.dark-mode #modelMenu{background:#1a1a1a;border-color:rgba(255,255,255,0.08);box-shadow:0 8px 30px rgba(0,0,0,0.4)}
body.dark-mode .mm-opt{color:#ccc}
body.dark-mode .mm-opt:hover{background:rgba(255,255,255,0.06)}
body.dark-mode .mm-opt.active{background:rgba(255,255,255,0.06)}
body.dark-mode .mm-lock{background:rgba(255,255,255,0.08);color:#666}
body.dark-mode .modal-overlay.show{animation:modalBgInDark 1s ease forwards}
@keyframes modalBgInDark{from{background:rgba(0,0,0,0);backdrop-filter:blur(0px)}to{background:rgba(0,0,0,0.5);backdrop-filter:blur(14px)}}
body.dark-mode .login-modal,.dark-mode .pricing-modal{background:rgba(20,20,20,0.92);box-shadow:0 30px 80px rgba(0,0,0,0.5)}
body.dark-mode .login-title,.dark-mode .pricing-title{color:#eee}
body.dark-mode .login-sub,.dark-mode .pricing-sub{color:#666}
body.dark-mode .login-logo svg{stroke:#fff}
body.dark-mode .login-logo svg circle{fill:#fff}
body.dark-mode .btn-google{background:#1a1a1a;border-color:rgba(255,255,255,0.1);color:#ddd}
body.dark-mode .btn-google:hover{background:#222;border-color:rgba(255,255,255,0.2)}
body.dark-mode .login-terms{color:#444}
body.dark-mode .login-terms a{color:#666}
body.dark-mode .price-card{border-color:rgba(255,255,255,0.06)}
body.dark-mode .price-card.featured{border-color:#fff}
body.dark-mode .pc-name{color:#eee}
body.dark-mode .pc-price{color:#eee}
body.dark-mode .pc-price span{color:#666}
body.dark-mode .pc-desc{color:#666}
body.dark-mode .pc-features li{color:#bbb}
body.dark-mode .pc-features li::before{color:#fff}
body.dark-mode .btn-price{border-color:#fff}
body.dark-mode .btn-price.primary{background:#fff;color:#000}
body.dark-mode .btn-price.primary:hover{background:#ddd}
body.dark-mode .btn-price.secondary{border-color:#333;color:#555}
body.dark-mode .modal-close svg{stroke:#666}
body.dark-mode .archive-map-title{color:#eee}
body.dark-mode .archive-map-sub{color:#666}
body.dark-mode .mypage-title{color:#eee}
body.dark-mode .mypage-card{background:rgba(30,30,30,0.6);border-color:rgba(255,255,255,0.06)}
body.dark-mode .mc-value{color:#eee}
body.dark-mode .mc-sub{color:#666}
body.dark-mode .sub-badge{background:rgba(255,255,255,0.06);color:#888}
body.dark-mode .sub-badge.pro{background:#fff;color:#000}
body.dark-mode .btn-upgrade{background:#fff;color:#000;border-color:#fff}
body.dark-mode .btn-unmask-start{background:#fff;color:#000;border-color:#fff}
body.dark-mode .interpret-input{background:rgba(255,255,255,0.05);border-color:rgba(255,255,255,0.08);color:#eee}
body.dark-mode .interpret-input:focus{border-color:rgba(255,255,255,0.2);background:rgba(255,255,255,0.08)}
body.dark-mode .interpret-go{background:#fff;color:#000}
body.dark-mode .ir-field{color:#eee}
body.dark-mode .ir-badge{color:#888;border-color:rgba(255,255,255,0.1)}
body.dark-mode .ir-card{background:rgba(255,255,255,0.03);border-color:rgba(255,255,255,0.06)}
body.dark-mode .ir-card-title{color:#888}
body.dark-mode .ir-card-body{color:#ddd}
body.dark-mode .ir-insight{background:rgba(255,255,255,0.02);border-color:rgba(255,255,255,0.06)}

/* ============ THEME TOGGLE ============ */
.btn-theme{display:flex;align-items:center;justify-content:center;width:34px;height:34px;border:1px solid rgba(0,0,0,0.08);border-radius:8px;background:transparent;cursor:pointer;transition:0.2s;flex-shrink:0}
.btn-theme:hover{border-color:rgba(0,0,0,0.2);background:rgba(0,0,0,0.02)}
.btn-theme:active{transform:scale(0.92);transition:0.06s}
.btn-theme svg{width:15px;height:15px;stroke:#555;fill:none;stroke-width:1.5;transition:0.3s}
body.dark-mode .btn-theme{border-color:rgba(255,255,255,0.1)}
body.dark-mode .btn-theme:hover{border-color:rgba(255,255,255,0.2);background:rgba(255,255,255,0.04)}
body.dark-mode .btn-theme svg{stroke:#999}
.btn-theme .icon-moon{display:block}
.btn-theme .icon-sun{display:none}
body.dark-mode .btn-theme .icon-moon{display:none}
body.dark-mode .btn-theme .icon-sun{display:block}

/* ============ LANGUAGE SELECTOR ============ */
.lang-sel{position:relative;display:flex;align-items:center}
.lang-btn{display:flex;align-items:center;gap:5px;padding:0 12px;height:34px;border:1px solid rgba(0,0,0,0.08);border-radius:8px;background:transparent;font-size:11px;font-weight:500;color:#666;cursor:pointer;transition:0.2s;font-family:inherit;letter-spacing:0.04em;box-sizing:border-box}
.lang-btn:hover{border-color:rgba(0,0,0,0.2);background:rgba(0,0,0,0.02)}
.lang-btn:active{transform:scale(0.94);transition:0.06s}
.lang-btn svg{width:12px;height:12px;stroke:currentColor;fill:none;stroke-width:1.5}
body.dark-mode .lang-btn{color:#999;border-color:rgba(255,255,255,0.1)}
body.dark-mode .lang-btn:hover{border-color:rgba(255,255,255,0.2);background:rgba(255,255,255,0.04)}
.lang-dropdown{display:none;position:absolute;top:42px;right:0;background:#fff;border:1px solid rgba(0,0,0,0.08);border-radius:10px;padding:4px;min-width:130px;box-shadow:0 8px 30px rgba(0,0,0,0.12);z-index:9999}
.lang-dropdown.show{display:block}
body.dark-mode .lang-dropdown{background:#1a1a1a;border-color:rgba(255,255,255,0.08);box-shadow:0 8px 30px rgba(0,0,0,0.4)}
.lang-opt{display:flex;align-items:center;gap:8px;width:100%;padding:9px 12px;font-size:12px;color:#333;border:none;background:none;cursor:pointer;border-radius:6px;transition:0.15s;font-family:inherit;text-align:left}
.lang-opt:hover{background:rgba(0,0,0,0.04)}
.lang-opt.active{font-weight:600;background:rgba(0,0,0,0.04)}
body.dark-mode .lang-opt{color:#ccc}
body.dark-mode .lang-opt:hover{background:rgba(255,255,255,0.06)}
body.dark-mode .lang-opt.active{background:rgba(255,255,255,0.06)}

/* ============ FILE ATTACH PREVIEW ============ */
.cb-attach-preview{display:flex;align-items:center;gap:8px;padding:6px 10px;margin-bottom:6px;background:rgba(0,0,0,0.03);border-radius:8px;font-size:12px;color:#555;animation:msgIn 0.3s ease}
body.dark-mode .cb-attach-preview{background:rgba(255,255,255,0.04);color:#aaa}
.cb-attach-preview-icon{width:24px;height:24px;border-radius:6px;background:rgba(0,0,0,0.06);display:flex;align-items:center;justify-content:center;flex-shrink:0}
body.dark-mode .cb-attach-preview-icon{background:rgba(255,255,255,0.06)}
.cb-attach-preview-icon svg{width:12px;height:12px;stroke:#666;fill:none;stroke-width:1.5}
body.dark-mode .cb-attach-preview-icon svg{stroke:#888}
.cb-attach-preview-name{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.cb-attach-preview-img{width:40px;height:40px;border-radius:6px;object-fit:cover;flex-shrink:0}
.cb-attach-preview-remove{width:20px;height:20px;border:none;background:none;cursor:pointer;display:flex;align-items:center;justify-content:center;opacity:0.4;transition:0.15s}
.cb-attach-preview-remove:hover{opacity:1}
.cb-attach-preview-remove svg{width:10px;height:10px;stroke:#999;fill:none;stroke-width:2}


/* ===== ESSENCE PROMPT BLUR ===== */
.essence-prompts{margin-top:20px;padding:16px;background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.06);border-radius:12px}
body:not(.dark-mode) .essence-prompts{background:rgba(0,0,0,0.02);border-color:rgba(0,0,0,0.06)}
.ep-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
.ep-title{font-size:11px;font-weight:600;letter-spacing:0.08em;color:var(--sub);display:flex;align-items:center;gap:6px}
.ep-title svg{width:14px;height:14px;stroke:currentColor;fill:none;stroke-width:1.5}
.ep-badge{font-size:9px;padding:2px 8px;border-radius:10px;background:rgba(255,200,0,0.15);color:#b8860b;font-weight:600;letter-spacing:0.05em}
body.dark-mode .ep-badge{background:rgba(255,200,0,0.1);color:#daa520}
.ep-list{display:flex;flex-direction:column;gap:6px}
.ep-item{font-size:13px;line-height:1.6;color:var(--text);padding:8px 12px;background:rgba(255,255,255,0.03);border-radius:8px;border:1px solid rgba(255,255,255,0.04);position:relative;overflow:hidden;transition:all 0.3s}
body:not(.dark-mode) .ep-item{background:rgba(0,0,0,0.02);border-color:rgba(0,0,0,0.04)}
.ep-item.locked{filter:blur(6px);user-select:none;pointer-events:none}
.ep-item.preview{filter:blur(0)}
.ep-unlock{display:flex;align-items:center;justify-content:center;gap:8px;margin-top:12px;padding:10px 20px;border:1px solid rgba(255,255,255,0.1);border-radius:8px;background:rgba(255,255,255,0.03);font-size:12px;color:var(--sub);cursor:pointer;transition:all 0.3s;font-family:inherit;width:100%}
body:not(.dark-mode) .ep-unlock{border-color:rgba(0,0,0,0.1);background:rgba(0,0,0,0.02)}
.ep-unlock:hover{background:rgba(255,255,255,0.08);border-color:rgba(255,255,255,0.2);color:var(--text)}
body:not(.dark-mode) .ep-unlock:hover{background:rgba(0,0,0,0.04);border-color:rgba(0,0,0,0.2)}
.ep-unlock svg{width:14px;height:14px;stroke:currentColor;fill:none;stroke-width:1.5}

/* ===== HAMBURGER NAV ===== */
.nav-hamburger{display:none;flex-direction:column;gap:4px;padding:8px;cursor:pointer;background:none;border:none;z-index:7001}
.nav-hamburger span{display:block;width:18px;height:1.5px;background:var(--text);transition:all 0.3s;border-radius:1px}
.nav-hamburger.open span:nth-child(1){transform:rotate(45deg) translate(4px,4px)}
.nav-hamburger.open span:nth-child(2){opacity:0}
.nav-hamburger.open span:nth-child(3){transform:rotate(-45deg) translate(4px,-4px)}
.nav-mobile-menu{display:none;position:fixed;top:0;left:0;width:100%;height:100vh;background:var(--bg);z-index:6999;flex-direction:column;align-items:center;justify-content:center;gap:32px;opacity:0;transition:opacity 0.3s}
.nav-mobile-menu.show{display:flex;opacity:1}
.nav-mobile-menu li{list-style:none;font-size:18px;font-weight:300;letter-spacing:0.08em;color:var(--text);cursor:pointer;padding:12px 24px;transition:0.2s}
.nav-mobile-menu li:hover{opacity:0.6}

/* ===== UNIFIED MOBILE ===== */
@media(max-width:768px){
  *{cursor:auto!important}
  .cursor-dot,.cursor-ring{display:none!important}
  body::after{display:none}
  /* Nav */
  nav{top:0;height:56px;padding:0 16px;border-radius:0;width:100%;max-width:100%}
  .logo{font-size:15px}
  .logo svg{width:20px;height:20px}
  .nav-center{display:none!important}
  .nav-auth{display:none!important}
  .nav-profile{display:none!important}
  .nav-hamburger{display:flex}
  .btn-theme{width:30px;height:30px}
  .btn-theme svg{width:13px;height:13px}
  .lang-btn{padding:0 8px;height:30px;font-size:10px}
  .lang-btn svg{width:10px;height:10px}
  /* Layout */
  .container{padding:0 20px}
  /* Hero */
  .hero-top{height:80vh;gap:14px}
  .hl-logo{font-size:16px!important}
  .hl-typing{font-size:22px!important}
  .hl-buttons{flex-direction:column;gap:8px}
  .hl-btn{font-size:10px;padding:10px 24px}
  /* Sections */
  #page-about section{padding:80px 0!important}
  .label{font-size:24px!important;margin-bottom:40px!important}
  .phi-text{font-size:18px!important;line-height:1.6}
  .phi-desc{font-size:13px!important}
  /* Demo sections */
  .demo-section{padding:60px 0!important}
  .demo-layout,.demo-layout-reverse{flex-direction:column!important;gap:24px;padding:0 20px}
  .demo-title{font-size:20px!important}
  .demo-desc{font-size:13px;line-height:1.6}
  .demo-chat-mock,.demo-profile-mock{max-width:100%;width:100%}
  .demo-essence-flow{gap:8px;padding:16px 8px}
  .def-step{padding:12px;min-width:50px}
  .def-icon{font-size:16px}
  .def-label{font-size:8px}
  .def-arrow{font-size:12px}
  /* Method */
  .method-row{flex-direction:column!important;padding:50px 0!important}
  .method-left,.method-right{width:100%!important}
  .method-left{margin-bottom:30px}
  .method-right{text-align:left}
  .big-typo{font-size:40px!important;justify-content:flex-start!important;filter:blur(0)!important;opacity:0.6!important}
  /* Chatbox */
  .chatbox-wrap{padding:0 8px 8px!important;flex-direction:column;gap:8px}
  .chatbox{max-width:100%;border-radius:16px}
  .chatbox.expanded{height:calc(100vh - 80px)!important;height:calc(100dvh - 80px)!important;border-radius:16px 16px 0 0}
  .unmask-panel{display:none!important}
  .cb-bar{padding:0 12px!important;height:48px!important}
  .cb-ta{font-size:14px!important}
  .cb-btns-left,.cb-side-btns{gap:4px!important}
  .cb-side-btns .cb-btn{display:none}
  .cb-side-btns .cb-btn:last-child{display:flex}
  .cb-msgs{padding:12px!important}
  .msg-body{max-width:90%!important;font-size:14px!important}
  .msg-actions{opacity:1}
  .cb-header{padding:10px 14px!important}
  .cb-header-actions{gap:6px!important}
  /* Service pages */
  .svc-intro{padding:0 20px}
  .svc-intro-title{font-size:24px!important}
  .svc-intro-desc{font-size:13px!important}
  .ir-grid{grid-template-columns:1fr}
  /* Archive */
  .archive-map-canvas{height:auto;min-height:100vh;padding:0 20px;display:flex;flex-direction:column;align-items:center;gap:40px;padding-top:160px;padding-bottom:60px}
  .archive-map-canvas .map-lines{display:none}
  .map-node{position:relative!important;left:auto!important;top:auto!important;transform:none!important}
  .map-label{position:relative;top:auto;left:auto;transform:none;margin-top:10px}
  .map-node:hover .map-label{opacity:1}
  .map-container{transform:scale(0.7)!important}
  .project-detail-inner{padding:70px 24px}
  .project-detail-close{top:20px;right:20px;width:36px;height:36px}
  .pd-gallery{grid-template-columns:1fr}
  .pd-gallery-item.wide{grid-column:span 1}
  .pd-meta{flex-wrap:wrap;gap:20px}
  /* Pricing & pages */
  .pricing-grid{grid-template-columns:1fr}
  .mypage-grid{grid-template-columns:1fr}
  /* Panels */
  .side-panel{width:100%!important;max-width:100%!important;right:0!important;border-radius:16px 16px 0 0!important;bottom:0!important;top:auto!important;max-height:70vh!important}
  .cbp-scroll{padding:12px!important}
  /* Footer */
  footer{flex-direction:column;gap:8px;text-align:center;padding:40px 0!important}
}
@media(max-width:480px){
  nav{padding:0 12px;height:50px}
  .hero-top{height:70vh}
  .hl-typing{font-size:18px!important}
  .demo-title{font-size:18px!important}
  .demo-desc{font-size:12px}
  .dcm-messages{min-height:200px;padding:10px}
  .dcm-bubble{font-size:12px}
  .dpm-body{padding:12px}
  .label{font-size:20px!important}
}
